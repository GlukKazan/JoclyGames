- Опции ZRF должны поставляться в отдельных js-файлах
  - zrf-model.js - ядро
    - partial - вариативное выполнение нескольких генераторов, одного за другим
    - verify - прерывает генерацию текущего шаблона
  - zrf-drop.js - поддержка сброса фигур
  - zrf-flags.js - флаги, позиционные флаги, атрибуты
  - zrf-zones.js - работа с игровыми зонами
  - zrf-invariants.js - приоритеты, шах и мат, правило большинства
  - zrf-specific.js - семантика перемещения фигуры (фигура на исходной позиции, пока ход не выполнен)
  - zrf-cascade.js - множественное перемещение фигур (проверить совместимость с partial на примере Chase)
  - zrf-pass.js - пропуск хода
  - zrf-ai.js - AI
- Все js и xslt-файлы для двух вариантов: отладочного и минифицированного
  - убираются пробелы
  - вместо полных имён методов используются аббревиатуры
  - не создаются именованные константы для позиций, направлений, зон и пр.
- java-приложение создаёт промежуточное xml-описание
  - выполняя наследование для каждого варианта в zrf
  - выделяя примитивы
    - шаблон поиска фигуры на доске по направлению next (+1)
    - поддержка работы с числами: clear, inc, dec, init, sum, is-n?, not-n? (см. Chase)
  - полностью раскрывая все макросы
  - автоматически выделяя параметризованные (направления) шаблоны описаний ходов
    - как различать параметры (позиции, направления, булевские значения)?
  - преобразуя grid-ы и направления в индивидуальные описания позиций и связей
  - определяя список используемых опций
  - выводя промежуточное xml-представление
- xslt-преобразование создаёт
  - json-описание или html-файл (в том числе, управляющее подключением опций)
  - js-описание модели (отладочное или минифицированное)
  - js-описание представления (отладочное или минифицированное)
- autoplay
  - Node.JS - приложение
  - Собственная реализация AI, поддержка custom-engine
  - Поддержка более чем 2 игроков, поддержка рандомных игроков
- Для доски строится граф направлений
  - Все позиции - целые индексы в линейном массиве
  - Направления - целые индексы
  - Связи (от каждой позиции в массиве направлений) - целые смещения или null
- Описания зон (json-объекты)
  - Привязаны к одному или несколким игрокам
  - Содержат массив позиций (целых чисел)
- Описания симметрий
  - Привязаны к игрокам
  - Хэш преобразующий одно направление в другое (целые числа)
- ZrfMoveTemplate
  - Design
    - Принимает описание доски
    - Опционально принимает генератор предыдущего частичного хода
    - Список параметров шаблона (массив целых, например направлений)
    - Команды стековой машины
      - Переходы со смещениями по списку команд
      - verify
  - Runtime (результат js-кодогенерации по параметризованному шаблону хода)
    - На входе фигура (её начальная позиция, возможно off - null), параметры
    - На выходе сгенерированный ход
      - Более желательные ходы выводить в первую очередь
  - Environment
    - Хранит все промежуточные изменения
      - Текущая позиция
      - Тип текущей фигуры
      - Созданные и удалённые фигуры
      - Изменения атрибутов фигур, на текущем ходу
      - Флаги
      - Позиционные флаги
    - Порядок поиска значений
      - Текущий шаблон
      - Предыдущий шаблон
      - Доска, если нет предыдущего шаблона
- ZrfMove
  - Может быть применён к позиции на доске
  - Может быть построен по zsg или pjn
  - Может вернуть zsg или pjn
- Специальные формы обрабатываются Java-транслятором
  - if
  - while
  - and
  - or
  - навигационные empty?, enemy?, friend?, in-zone?
- Доработки по example.zrf
  - zrfTo может вызываться по нескольку раз за ход (для одного zrfFrom) !!!
  - Формировать соответвие opposite-направлений
    - Дополнительная симметрия с индексом игрока 0
  - Реализовать not-last-from?
